<html>
<head>
<title>
Tthe COERbuoy platform
</title>
<link rel="stylesheet" href="main.css">
<script src=jquery/jquery-3.5.1.min.js></script>

<script type="text/javascript" >
	$(document).ready(function(){
	
	$("#run_single").on("click",function(){
	                        job=[{"wave":$("#wavetype").val(),
	                                            "H":$("#amplitude").val(),
	                                            "P":$("#period").val()}]
	    run_job(job);
	});
	
	$("#run_decay").on("click",function(){
	                        job=[{"wave":"decay_test",
	                                            "x0":$("#x0").val(),
	                                            "t":$("#tdecay").val()}]
	    run_job(job);
	});

	
	$("#regular_batch").on("click",function(){	     
		  job=[];	     
	     for (p of [3.5,5,6.5])
	     {
	       for (A of [0.75, 1.25])
	       {
	           job.push({"wave":"regular_wave",
	                             "H":A,
	                             "P":p})
	       }
	     }  
	     run_job(job);                                                              
	});
	$("#regular_sweep").on("click",function(){	     
		  job=[];	     
	     for (p of [4,6,8,10,12])
	     {
	       for (A of [1.5,3])
	       {
	           job.push({"wave":"regular_wave",
	                             "H":A,
	                             "P":p})
	       }
	     }  
	     run_job(job);                                                              
	});
	$("#brettschneider_batch").on("click",function(){
	     job=[];
	     for (p of [3.5,5,6.5])
	     {
	       for (A of [0.75, 1.25])
	       {
	           job.push({"wave":"brettschneider_wave",
	                             "H":A,
	                             "P":p});
	       }
	     }                                                                
	     run_job(job);
	});


	$("#test_run").on("click",function(){
	job_array=$("#test_run").data("cont");});});
	               
	function run_job(job){
	    job_array={"sea_states":job};
       job_array["ctrl"]=$("#sel_ctrl").val();
	    $.ajax({url:'run.html',
	            type: 'POST',
	            data: JSON.stringify(job_array),
	            contentType:'application/json; charset=utf-8',
	            dataTyp:'json',
	            success:location.href="/results.html"
	            })};

</script>

</head>
<body>
<ul class="nav">
    <li><a class="button" href="start.html">Main</a></li>
    <li><a class="button" href="results.html">Results</a></li>
    <li><a class="button" href="visuals.html">Visualisation</a></li>
        <li><a class="button" href="doc.html">Parameters</a></li>
    <li><a class="button" href="about.html">About</a></li>
</ul>
<h1>Welcome to the COERbuoy platform!</h1>
<div class="hcontainer">
	<div class="vcontainer">
		<div>
		This is a easy to use tool to evaluate control algorithms for Wave Engery Converter of the heave point-absorber type. </br>
		</div>
		
		<div class="box">
		Please choose from one of the following options:
		</br></br>
		Control method:
		  <select id="sel_ctrl" name="Control">
		    <option value="linear">Linear Damping</option>
		    <option value="python3 Controller_brake_1.py">Test controller</option>
          <!Enter a custom controller like this:<!>		    
		    <!option value="py C:\\users\me\controller\controller1.py">Custom_controller<!/option>
		    <! <option value="TCP">Open TCP<!</option>
		  </select> 
		</br></br>
		<div class="box">
			Single wave:
			</br>
			  <select id="wavetype" name="WaveType">
			    <option value="regular_wave">Regular wave</option>
			    <option value="brettschneider_wave">Bretschneider</option>
			  </select>, H=
			  <input type="number" id="amplitude" name="WaveAmp" step="0.01" size="4", value="1.5"> </input> m, p=
			  <input type="number" id="period" name="WavePer" step="0.01" size="4" value="3.5"> </input> s. 
			  </select>
			  <button id="run_single" data-cont='{"sea_states":[{"wave":"regular_wave","H":1,"P":3.5,"ctrl":"linear"}]}' >Run</button>
	
			  </br>
			</br>
	
			Preconfigured batches:
			</br>
			  <button id="regular_batch">Regular waves</button>
			</br>
			  <button id="brettschneider_batch">Bretschneider waves</button>
			</br>
			  <button id="regular_sweep">Regular period sweep, H=1.5</button>
			</br>
			<!--button id="test_run" data-cont='{"sea_states":[{"wave":"regular_wave","H":1,"P":3.5,"ctrl":"linear"}]}' >test</button-->
			</br>
			
         Decay test:
			</br>
			  z_start = <input type="number" id="x0" name="decay_height" step="0.01" size="4", value="1"> </input> m, t=
			  <input type="number" id="tdecay" name="decay_time" step="0.01" size="4" value="10"> </input> s. 
			  <button id="run_decay" data-cont='{"tests":[{"wave":"decay_test","x0","t":3.5,"ctrl":"linear"}]}' >Run</button>
	   
         </div>
		</div>
	</div>
	<div class="flex-item">
   <img src="COERbuoy.png" width="300px" alt="sketch">
   </div>
</div>
</body>
</html>
